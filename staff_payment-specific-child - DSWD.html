<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Payment - iChildren</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ============================================
       CSS VARIABLES - CENTRALIZED COLOR PALETTE
       ============================================ */
    :root {
      --primary-color:#5DD5C0;
      --primary-light:#E8F9F6;
      --accent-orange:#FF9D5C;
      --accent-red:#FF6B6B;
      --accent-blue:#4D96FF;
      --accent-yellow:#FFD93D;
      --accent-purple:#9C27B0;
      --accent-pink:#E91E63;
      --status-queue:#E3F2FD;
      --status-queue-text:#1976D2;
      --status-update:#F5F5F5;
      --status-update-text:#6B7280;
      --bg-dashboard:#F9F9F9;
      --bg-container:#FFFFFF;
      --text-primary:#2C3E50;
      --text-secondary:#7F8C8D;
      --border-color:#E0E0E0;
      --sidebar-active:#F2F2F2;
      --online-green:#4CAF50;
    }

    /* ============================================
       GLOBAL STYLES & TYPOGRAPHY
       ============================================ */
    *{ margin:0; padding:0; box-sizing:border-box; }

    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
      font-size:11px;
      color:var(--text-primary);
      background-color:var(--bg-dashboard);
    }

    /* ============================================
       LAYOUT STRUCTURE
       ============================================ */
    .dashboard-container{ display:flex; min-height:100vh; }

    /* Sidebar */
    .sidebar{
      width:180px; background-color:var(--bg-container);
      padding:20px 0; display:flex; flex-direction:column; align-items:center;
      position:fixed; top:0; left:0; bottom:0; overflow-y:auto; z-index:100;
    }
    .profile-section{ text-align:center; margin-bottom:25px; }
    .profile-avatar{
      width:70px; height:70px; border-radius:50%;
      background:linear-gradient(135deg,#667eea 0%, #764ba2 100%);
      margin:0 auto 10px; display:flex; align-items:center; justify-content:center;
      color:#fff; font-size:28px; font-weight:600;
    }
    .profile-name{ font-size:13px; font-weight:500; color:var(--text-primary); }
    .nav-item{
      display:block; text-decoration:none; color:var(--text-secondary);
      padding:10px 15px; margin-bottom:5px; font-size:12px; border-radius:6px;
      transition:.2s; text-align:center; position:relative; cursor:pointer;
    }
    .nav-item:hover,.nav-item.active{ background:var(--sidebar-active); color:var(--text-primary); }
    .nav-item.has-dropdown::after{
      content:'‚ñº'; position:absolute; right:15px; top:50%; transform:translateY(-50%);
      font-size:8px; transition:transform .2s;
    }
    .nav-item.has-dropdown.open::after{ transform:translateY(-50%) rotate(180deg); }
    .nav-dropdown{ display:none; padding-left:0; margin-top:5px; }
    .nav-dropdown.open{ display:block; }
    .nav-dropdown-item{
      display:block; text-decoration:none; padding:8px 10px; font-size:11px;
      color:var(--text-secondary); border-radius:4px; margin-bottom:3px; transition:.2s; text-align:center;
    }
    .nav-dropdown-item:hover{ background:var(--bg-dashboard); color:var(--text-primary); }

    /* Main */
    .main-content{
      margin-left:180px;
      padding:20px 16px 20px 30px;
      overflow-y:auto;
      width:calc(100% - 180px);
    }

    /* Header */
    .header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .searchbar{
      display:flex; align-items:center; gap:8px; height:40px; width:320px; padding:0 10px 0 12px;
      background:var(--bg-container); border:1px solid var(--border-color); border-radius:9999px;
      box-shadow:0 1px 0 rgba(0,0,0,.02); transition:border-color .15s ease, box-shadow .15s ease;
    }
    .searchbar:focus-within{ border-color:#d0d7de; box-shadow:0 0 0 4px var(--primary-light); }
    .searchbar input{
      flex:1; min-width:0; border:0; outline:none; background:transparent; font-size:12px; color:var(--text-primary);
    }
    .searchbar input::placeholder{ color:var(--text-secondary); opacity:.8; }
    .searchbar .icon-left,.searchbar .icon-right{
      display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border:0; outline:0;
      background:transparent; color:var(--text-secondary); border-radius:999px; cursor:pointer; transition:background-color .15s ease, color .15s ease;
    }
    .searchbar .icon-left:hover,.searchbar .icon-right:hover{ background:var(--bg-dashboard); color:var(--text-primary); }
    .header-right{ display:flex; align-items:center; gap:15px; }
    .online-status{ display:flex; align-items:center; gap:6px; font-size:11px; color:var(--text-primary); }
    .status-dot{ width:10px; height:10px; background:var(--online-green); border-radius:50%; }
    .notification-bell{
      width:35px; height:35px; display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:16px; transition:.2s;
    }
    .notification-bell:hover{ transform:scale(1.1); }
    .logo-container{
      width:35px; height:35px; background:linear-gradient(135deg,#5DD5C0 0%, #4AC4B0 100%);
      border-radius:50%; display:flex; align-items:center; justify-content:center; color:#fff; font-size:11px; font-weight:700; cursor:pointer;
    }

    /* ============================================
       CHILD PROFILE HEADER + DSWD GRANT
       ============================================ */
    .child-profile-header{
      background:var(--bg-container); border-radius:10px; padding:20px; margin-bottom:20px;
      box-shadow:0 2px 6px rgba(0,0,0,.05); display:flex; align-items:center; gap:15px;
    }
    .child-photo{
      width:70px; height:70px; border-radius:50%; background:linear-gradient(135deg,#FFB6C1 0%, #FFC0CB 100%); overflow:hidden; flex-shrink:0;
    }
    .child-photo img{ width:100%; height:100%; object-fit:cover; }
    .child-details-header{ display:flex; flex-direction:column; gap:4px; flex:1; }
    .child-name{ font-size:18px; font-weight:600; color:var(--text-primary); }
    .child-meta{ display:flex; align-items:center; gap:15px; font-size:11px; color:var(--text-secondary); }
    .child-meta-item{ display:flex; align-items:center; gap:5px; }
    .therapist-info{ font-size:11px; color:var(--text-secondary); }
    .therapist-info strong{ color:var(--text-primary); }

    .grant-box{ text-align:center; }
    .grant-label{ font-size:10px; color:var(--text-secondary); margin-bottom:4px; }
    .grant-value{ font-size:16px; font-weight:700; color:var(--text-primary); }
    .dswd-logo{
      width:50px; height:50px; display:flex; align-items:center; justify-content:center; font-size:32px; flex-shrink:0;
    }

    /* ============================================
       KPI CARDS
       ============================================ */
    .kpi-section{ display:grid; grid-template-columns:repeat(7,1fr); gap:8px; margin-bottom:20px; }
    .kpi-card{
      background:var(--bg-container); min-height:88px; padding:10px 12px; border-radius:10px; display:flex; align-items:center; gap:8px;
      box-shadow:0 2px 6px rgba(0,0,0,.05); border:2px solid transparent; transition:.2s;
    }
    .kpi-card:hover{ transform:translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,.1); }
    .kpi-card.green{ border-color:var(--online-green); }
    .kpi-card.red{ border-color:var(--accent-red); }
    .kpi-card.blue{ border-color:var(--accent-blue); }
    .kpi-card.orange{ border-color:var(--accent-orange); }
    .kpi-card.teal{ border-color:var(--primary-color); }
    .kpi-card.pink{ border-color:var(--accent-pink); }
    .kpi-card.purple{ border-color:var(--accent-purple); }
    .kpi-icon{ width:48px; height:48px; display:flex; align-items:center; justify-content:center; font-size:28px; flex-shrink:0; }
    .kpi-content{ flex:1; min-width:0; }
    .kpi-label{ font-size:9px; color:var(--text-secondary); margin-bottom:4px; line-height:1.2; }
    .kpi-value{ font-size:20px; font-weight:700; color:var(--text-primary); }
    .kpi-currency{ font-size:8px; margin-right:2px; }

    /* ============================================
       CONTENT GRID
       ============================================ */
    .content-grid{ display:grid; grid-template-columns:1fr 420px; gap:20px; margin-bottom:20px; }
    .card{
      background:var(--bg-container); border-radius:10px; padding:20px; box-shadow:0 2px 6px rgba(0,0,0,.05);
    }
    .card-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:15px; }
    .card-title{ font-size:16px; font-weight:600; color:var(--text-primary); }
    .edit-icon{ width:20px; height:20px; color:var(--text-secondary); cursor:pointer; }

    /* Payment Parameter Grid */
    .payment-params{ display:grid; grid-template-columns:repeat(3,1fr); gap:15px; margin-bottom:15px; }
    .param-item{ display:flex; flex-direction:column; gap:6px; }
    .param-label{ font-size:10px; color:var(--text-secondary); font-weight:600; }
    .param-value{
      font-size:12px; color:var(--text-primary); background:var(--status-update);
      padding:8px 12px; border-radius:6px; border:1px solid var(--border-color); text-align:center; font-weight:500;
    }
    .param-value.highlight{ font-weight:700; }

    /* Payment Summary Chart */
    .chart-container{ height:280px; position:relative; padding:10px; }

    /* ============================================
       WEEKLY PAYMENT TABLE
       ============================================ */
    .weekly-payment-section{ margin-bottom:20px; }
    .weekly-table-wrapper{ border:1px solid var(--border-color); border-radius:8px; overflow:hidden; }
    .weekly-table-header{
      display:grid; grid-template-columns:80px 1fr 140px 140px 140px;
      background:var(--bg-container); border-bottom:2px solid var(--text-primary);
      padding:12px 16px; gap:12px; font-weight:600;
    }
    .weekly-header-cell{ font-size:11px; color:var(--text-primary); font-weight:600; text-align:center; }
    .weekly-header-cell.left{ text-align:left; }
    .weekly-header-cell.sessions{ text-align:center; }

    .week-row{ background:var(--bg-container); }
    .week-header{
      display:grid; grid-template-columns:80px 1fr 140px 140px 140px; align-items:center; padding:16px; gap:12px;
      border-top:1px solid var(--border-color); border-bottom:1px solid var(--border-color);
    }
    .week-label{ font-size:13px; font-weight:600; color:var(--text-primary); text-align:left; }

    .session-dates{ display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }

    .session-date-item{
      text-align:center; padding:10px 8px; border-radius:6px; border:1px solid transparent; cursor:default;
    }
    .session-date-item:hover{ background-color:rgba(93,213,192,0.08); border-color:var(--primary-color); }

    .session-date-wrapper{
      padding:8px 0; margin:0; border-top:1px solid var(--border-color); border-bottom:1px solid var(--border-color);
    }
    .session-date{ font-size:10px; color:var(--text-secondary); margin-bottom:6px; }

    .session-status-row{ display:flex; align-items:center; justify-content:center; gap:10px; }
    .session-payment{
      display:flex; align-items:center; justify-content:center; gap:4px; font-size:11px; font-weight:500; color:var(--text-primary);
    }
    .session-payment-underlined{ border-bottom:1px solid var(--border-color); padding-bottom:2px; }

    .status-indicator{
      width:10px; height:10px; border-radius:50%; flex-shrink:0;
    }
    .status-indicator.green{ background:var(--online-green); }   /* Paid */
    .status-indicator.yellow{ background:var(--accent-yellow); } /* Partial */
    .status-indicator.red{ background:var(--accent-red); }       /* Attended not paid */
    .status-indicator.gray{ background:#BDBDBD; }                /* Absent */
    .status-indicator.blue{ background:var(--accent-blue); }     /* Not yet started */

    .status-dot-btn{
      background:transparent; border:none; padding:0; margin:0; line-height:0; cursor:pointer;
      display:inline-flex; align-items:center; justify-content:center;
    }
    .status-dot-btn:focus-visible{ outline:2px solid var(--primary-light); outline-offset:2px; }

    .week-summary{ font-size:12px; text-align:center; color:var(--text-primary); font-weight:600; }

    /* ============================================
       PAYMENT MODAL
       ============================================ */
    .payment-modal-overlay{
      display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,.5); z-index:2000; align-items:center; justify-content:center;
    }
    .payment-modal-overlay.active{ display:flex; }
    .payment-modal{
      background:var(--bg-container); border-radius:12px; width:90%; max-width:480px; padding:30px;
      box-shadow:0 10px 40px rgba(0,0,0,.2); position:relative; animation:modalSlideIn .3s ease;
    }
    @keyframes modalSlideIn{
      from{opacity:0; transform:translateY(-30px);} to{opacity:1; transform:translateY(0);}
    }
    .payment-modal-header{ margin-bottom:25px; }
    .payment-modal-title{ font-size:18px; font-weight:600; color:var(--text-primary); margin-bottom:8px; }
    .payment-modal-subtitle{ font-size:12px; color:var(--text-secondary); }
    .payment-modal-body{ display:flex; flex-direction:column; gap:20px; }
    .payment-modal-row{ display:grid; grid-template-columns:1fr 1fr; gap:15px; }
    .payment-modal-field{ display:flex; flex-direction:column; gap:8px; }
    .payment-modal-field.full-width{ grid-column:1 / -1; }
    .payment-modal-label{ font-size:11px; font-weight:600; color:var(--text-secondary); }
    .payment-modal-input,.payment-modal-select{
      width:100%; padding:10px 12px; border:1px solid var(--border-color); border-radius:6px; font-size:12px; color:var(--text-primary); background:#F8F9FA; outline:none;
    }
    .payment-modal-input:focus,.payment-modal-select:focus{ border-color:var(--primary-color); box-shadow:0 0 0 3px var(--primary-light); }
    .payment-modal-select{
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%237F8C8D' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:right 12px center; padding-right:36px; cursor:pointer;
    }
    .payment-amount-split{ display:flex; align-items:center; gap:10px; }
    .payment-amount-split input{ flex:1; }
    .payment-amount-divider{ font-size:14px; color:var(--text-secondary); font-weight:500; }
    .payment-modal-actions{ display:flex; gap:12px; margin-top:10px; }
    .payment-modal-btn{
      flex:1; padding:12px; border-radius:6px; font-size:13px; font-weight:600; cursor:pointer; transition:.2s; border:none;
    }
    .payment-modal-btn.cancel{ background:var(--bg-dashboard); color:var(--text-primary); border:1px solid var(--border-color); }
    .payment-modal-btn.cancel:hover{ background:var(--sidebar-active); }
    .payment-modal-btn.save{ background:#A8E6CF; color:#2C3E50; }
    .payment-modal-btn.save:hover{ background:#8FD9B8; }

    /* ============================================
       TABLES
       ============================================ */
    .table-container{ overflow-x:auto; max-height:400px; overflow-y:auto; }
    .table-container::-webkit-scrollbar{ width:4px; height:4px; }
    .table-container::-webkit-scrollbar-track{ background:transparent; }
    .table-container::-webkit-scrollbar-thumb{ background:var(--border-color); border-radius:2px; }
    table{ width:100%; border-collapse:collapse; }
    thead{
      border-bottom:1px solid var(--border-color); position:sticky; top:0; background:var(--bg-container); z-index:10;
    }
    th{
      text-align:left; padding:10px 8px; font-size:10px; font-weight:600; color:var(--text-secondary);
    }
    tbody tr{ border-bottom:1px solid #F5F5F5; transition:background-color .2s; }
    tbody tr:hover{ background:var(--bg-dashboard); }
    td{ padding:10px 8px; font-size:11px; color:var(--text-primary); }
    .btn-pay{
      background:var(--primary-color); color:#fff; border:none; padding:6px 14px; border-radius:5px; font-size:10px; font-weight:600; cursor:pointer; transition:.2s;
    }
    .btn-pay:hover{ background:#4AC4B0; transform:translateY(-1px); }
    .status-badge{ display:inline-block; padding:4px 10px; border-radius:5px; font-size:9px; font-weight:600; }
    .status-badge.paid{ background:#E8F5E9; color:var(--online-green); }
    .status-badge.partial{ background:#FFF9E6; color:var(--accent-yellow); }

    /* ============================================
       FILTER POPUP (CENTERED, WITH SCROLLBAR)
       ============================================ */
    .filter-overlay{
      display:none;
      position:fixed;
      inset:0;
      background:rgba(0,0,0,.3);
      z-index:1000;
      align-items:center;
      justify-content:center;
    }
    .filter-overlay.active{ display:flex; }

    .filter-panel{
      width:360px;
      max-width:90%;
      max-height:80vh;
      background:var(--bg-container);
      border-radius:12px;
      padding:24px;
      box-shadow:0 10px 40px rgba(0,0,0,.25);
      display:flex;
      flex-direction:column;
      overflow-y:auto;
    }
    .filter-panel::-webkit-scrollbar{
      width:6px;
    }
    .filter-panel::-webkit-scrollbar-track{
      background:transparent;
    }
    .filter-panel::-webkit-scrollbar-thumb{
      background:var(--border-color);
      border-radius:3px;
    }

    .filter-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; }
    .filter-title{ font-size:16px; font-weight:600; color:var(--text-primary); }
    .filter-close{
      background:none; border:none; font-size:20px; color:var(--text-secondary); cursor:pointer; padding:0; width:24px; height:24px;
    }
    .filter-group{ margin-bottom:16px; }
    .filter-label{
      display:block; font-size:11px; font-weight:600; color:var(--text-secondary); margin-bottom:6px;
    }
    .filter-select,.filter-input{
      width:100%; padding:10px 12px; border:1px solid var(--border-color); border-radius:6px; font-size:12px; color:var(--text-primary);
      background:var(--bg-container); cursor:pointer; outline:none;
    }
    .filter-select{
      appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%237F8C8D' d='M6 8L2 4h8z'/%3E%3C/svg%3E");
      background-repeat:no-repeat; background-position:right 12px center; padding-right:36px;
    }
    .filter-select:focus,.filter-input:focus{ border-color:var(--primary-color); box-shadow:0 0 0 3px var(--primary-light); }

    .filter-actions{ display:flex; gap:10px; margin-top:20px; }
    .btn-filter{
      flex:1; padding:10px; border-radius:6px; font-size:12px; font-weight:600; cursor:pointer; transition:.2s; border:none;
    }
    .btn-filter.primary{ background:var(--primary-color); color:#fff; }
    .btn-filter.primary:hover{ background:#4AC4B0; }
    .btn-filter.secondary{
      background:var(--bg-dashboard); color:var(--text-primary); border:1px solid var(--border-color);
    }
    .btn-filter.secondary:hover{ background:var(--sidebar-active); }

    .filter-trigger{
      display:flex; align-items:center; gap:6px; padding:8px 14px; background:var(--bg-container);
      border:1px solid var(--border-color); border-radius:6px; font-size:11px; color:var(--text-secondary); cursor:pointer; transition:.2s;
    }
    .filter-trigger:hover{ background:var(--sidebar-active); color:var(--text-primary); }

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media (max-width:1600px){ .kpi-section{ grid-template-columns:repeat(4,1fr); } }
    @media (max-width:1400px){
      .kpi-section{ grid-template-columns:repeat(3,1fr); }
      .content-grid{ grid-template-columns:1fr; }
    }
    @media (max-width:1200px){ .payment-params{ grid-template-columns:repeat(2,1fr); } }
    @media (max-width:768px){
      .sidebar{ display:none; }
      .main-content{ margin-left:0; width:100%; }
      .kpi-section{ grid-template-columns:1fr; }
      .searchbar{ width:100%; }
      .child-profile-header{ flex-direction:column; gap:15px; }
      .payment-params{ grid-template-columns:1fr; }
      .filter-panel{ max-height:90vh; }
    }
  </style>
</head>
<body>
  <div class="dashboard-container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="profile-section">
        <div class="profile-avatar">J</div>
        <div class="profile-name">Jenny</div>
      </div>
      <nav class="nav-menu">
        <a href="staff_maindashboard.html" class="nav-item">Home</a>
        <a href="staff_childprofile.html" class="nav-item">Child Profile</a>
        <a href="staff_calendar.html" class="nav-item">Calendar</a>
        <a href="staff_payment.html" class="nav-item active">Payment</a>

        <div class="nav-item has-dropdown" onclick="toggleDropdown(this)">
          Report
          <div class="nav-dropdown">
            <a href="staff_appointment-summary.html" class="nav-dropdown-item">Appointment Summary</a>
            <a href="staff_payment-status-summary.html" class="nav-dropdown-item">Payment Status Summary</a>
            <a href="staff_payment-type-summary.html" class="nav-dropdown-item">Payment Type Summary</a>
            <a href="staff_management-table.html" class="nav-dropdown-item">Management Table</a>
          </div>
        </div>

        <a href="logout.html" class="nav-item" style="margin-top:50px;">Log Out</a>
        <a href="staff_settings.html" class="nav-item">Settings</a>
      </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main-content">
      <!-- HEADER -->
      <header class="header">
        <form class="searchbar" role="search" onsubmit="return false;">
          <button type="button" class="icon-left" aria-label="Search">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path d="M11 4a7 7 0 1 1-4.95 11.95l-2.6 2.6a1 1 0 0 1-1.4-1.42l2.6-2.6A7 7 0 0 1 11 4Zm0 2a5 5 0 1 0 0 10A5 5 0 0 0 11 6Z" fill="currentColor"/>
            </svg>
          </button>
          <input type="text" placeholder="Search..." id="searchInput" autocomplete="off" />
          <button type="button" class="icon-right" aria-label="Open filters" onclick="openFilterPanel()">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path d="M4 7h8a2 2 0 1 0 0-2H4a2 2 0 0 0 0 2Zm0 12h8a2 2 0 1 0 0-2H4a2 2 0 0 0 0 2Zm16-7h-8a2 2 0 1 0 0 2h8a2 2 0 1 0 0-2Z" fill="currentColor"/>
            </svg>
          </button>
        </form>

        <div class="header-right">
          <div class="online-status">
            <span class="status-dot"></span>
            <span>Online</span>
          </div>
          <div class="notification-bell" onclick="showNotifications()">üîî</div>
          <div class="logo-container" title="iChildren">iC</div>
        </div>
      </header>

      <!-- CHILD PROFILE HEADER -->
      <div class="child-profile-header">
        <div class="child-photo">
          <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Ccircle cx='100' cy='100' r='100' fill='%23FFB6C1'/%3E%3Ctext x='100' y='130' font-size='80' fill='white' text-anchor='middle' font-family='Arial'%3EM%3C/text%3E%3C/svg%3E" alt="Child">
        </div>
        <div class="child-details-header">
          <div class="child-name">Mark Hechenova</div>
          <div class="child-meta">
            <span class="child-meta-item"><strong>001</strong></span>
            <span class="child-meta-item">8 years old</span>
            <span class="child-meta-item">ASD Level 2</span>
          </div>
          <div class="therapist-info">
            Assigned Therapist: <strong>Teacher Dela Cruz</strong> | Occupational Therapist
          </div>
        </div>
      </div>

      <!-- DSWD GRANT INFORMATION -->
      <div class="child-profile-header" style="margin-top: 15px;">
        <div class="dswd-logo">
          <svg viewBox="0 0 64 64" width="50" height="50">
            <path fill="#1976D2" d="M32 8L8 20v16c0 14.4 9.6 27.2 24 32 14.4-4.8 24-17.6 24-32V20L32 8z"/>
            <path fill="#FFEB3B" d="M32 14L14 24v12c0 11.2 7.2 21.6 18 25.6 10.8-4 18-14.4 18-25.6V24L32 14z"/>
          </svg>
        </div>
        <div>
          <div class="grant-box">
            <div class="grant-label">Grant Amount</div>
            <div class="grant-value">‚Ç± 20,000.00</div>
          </div>
          <div class="grant-box" style="margin-top: 8px;">
            <div class="grant-label">Received</div>
            <div class="grant-value">‚Ç± 10,000.00</div>
          </div>
        </div>
        <div>
          <div class="grant-box">
            <div class="grant-label">Pending Grant</div>
            <div class="grant-value">‚Ç± 10,000.00</div>
          </div>
          <div class="grant-box" style="margin-top: 8px;">
            <div class="grant-label">Amount Utilized</div>
            <div class="grant-value">‚Ç± 9,800.00</div>
          </div>
        </div>
      </div>

      <!-- KPI CARDS -->
      <section class="kpi-section">
        <div class="kpi-card green"><div class="kpi-icon">‚úÖ</div><div class="kpi-content"><div class="kpi-label">Attended Session</div><div class="kpi-value">5</div></div></div>
        <div class="kpi-card red"><div class="kpi-icon">‚ùå</div><div class="kpi-content"><div class="kpi-label">Missed Session</div><div class="kpi-value">1</div></div></div>
        <div class="kpi-card blue"><div class="kpi-icon">üîÑ</div><div class="kpi-content"><div class="kpi-label">Remaining Session</div><div class="kpi-value"><span class="kpi-currency">‚Ç±</span>9,000.00</div></div></div>
        <div class="kpi-card orange"><div class="kpi-icon">üíµ</div><div class="kpi-content"><div class="kpi-label">Cash Payment</div><div class="kpi-value"><span class="kpi-currency">‚Ç±</span>600.00</div></div></div>
        <div class="kpi-card teal"><div class="kpi-icon">üèõÔ∏è</div><div class="kpi-content"><div class="kpi-label">DSWD Payment</div><div class="kpi-value"><span class="kpi-currency">‚Ç±</span>9,800.00</div></div></div>
        <div class="kpi-card pink"><div class="kpi-icon">‚ö†Ô∏è</div><div class="kpi-content"><div class="kpi-label">Unpaid / Partial</div><div class="kpi-value"><span class="kpi-currency">‚Ç±</span>800.00</div></div></div>
        <div class="kpi-card purple"><div class="kpi-icon">üì±</div><div class="kpi-content"><div class="kpi-label">Digital Payment</div><div class="kpi-value"><span class="kpi-currency">‚Ç±</span>0.00</div></div></div>
      </section>

      <!-- CONTENT GRID -->
      <div class="content-grid">
        <!-- PAYMENT PARAMETER -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Payment Parameter</h2>
            <svg class="edit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
          </div>

          <div class="payment-params">
            <div class="param-item"><span class="param-label">Frequency</span><div class="param-value">3x / Week</div></div>
            <div class="param-item"><span class="param-label">Number of Weeks</span><div class="param-value">5</div></div>
            <div class="param-item"><span class="param-label">Total Number of Session</span><div class="param-value">15</div></div>
            <div class="param-item"><span class="param-label">Total Balance</span><div class="param-value highlight">‚Ç± 20,000.00</div></div>
            <div class="param-item"><span class="param-label">Bill Session</span><div class="param-value">‚Ç± 600.00</div></div>
            <div class="param-item"><span class="param-label">Total Amount Paid</span><div class="param-value highlight">‚Ç± 1,600.00</div></div>
          </div>
        </div>

        <!-- PAYMENT SUMMARY -->
        <div class="card">
          <div class="card-header"><h2 class="card-title">Payment Summary</h2></div>
          <div class="chart-container"><canvas id="paymentChart"></canvas></div>
        </div>
      </div>

      <!-- WEEKLY PAYMENT -->
      <div class="card weekly-payment-section">
        <div class="card-header"><h2 class="card-title">Weekly Payment</h2></div>

        <div class="weekly-table-wrapper">
          <div class="weekly-table-header">
            <div class="weekly-header-cell left">Week<br>Number</div>
            <div class="weekly-header-cell sessions">Session Date<br><span style="font-size:9px;">Paid Amount | Status</span></div>
            <div class="weekly-header-cell">Weekly Bill</div>
            <div class="weekly-header-cell">Total<br>Paid Amount<br>(Weekly)</div>
            <div class="weekly-header-cell">Remaining<br>Balance<br>(Weekly)</div>
          </div>
          <div id="weeklyPaymentContainer"></div>
        </div>
      </div>

      <!-- EVALUATION -->
      <div class="card">
        <div class="card-header"><h2 class="card-title">Evaluation</h2></div>
        <div class="table-container">
          <table>
            <thead><tr><th>Date</th><th>Date Paid</th><th>Amount</th><th>Paid Amount</th><th>Remaining Balance</th><th>Status</th></tr></thead>
            <tbody id="evaluationTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- SCHEDULED EVALUATION -->
      <div class="card" style="margin-top:20px;">
        <div class="card-header">
          <h2 class="card-title">Scheduled Evaluation</h2>
          <div style="display:flex; align-items:center; gap:8px;"><span style="font-size:28px;">üìã</span></div>
        </div>
        <div class="table-container">
          <table>
            <thead><tr><th>Date</th><th>Time</th><th>Teacher</th><th>Status</th></tr></thead>
            <tbody id="scheduledEvalTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- GROUP SESSION -->
      <div class="card" style="margin-top:20px;">
        <div class="card-header"><h2 class="card-title">Group Session</h2></div>
        <div class="table-container">
          <table>
            <thead><tr><th>Date</th><th>Date Paid</th><th>Amount</th><th>Paid Amount</th><th>Remaining Balance</th><th>Status</th></tr></thead>
            <tbody id="groupSessionTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- GROUP SESSION SCHEDULE -->
      <div class="card" style="margin-top:20px;">
        <div class="card-header">
          <h2 class="card-title">Group Session Schedule</h2>
          <div style="display:flex; align-items:center; gap:8px;"><span style="font-size:28px;">üë•</span></div>
        </div>
        <div class="table-container">
          <table>
            <thead><tr><th>Date</th><th>Time</th><th>Teacher</th><th>Status</th></tr></thead>
            <tbody id="scheduledGroupTableBody"></tbody>
          </table>
        </div>
      </div>

      <!-- TRANSACTION MANAGEMENT (DSWD-focused filter popup) -->
      <div class="card" style="margin-top:20px;">
        <div class="card-header">
          <h2 class="card-title">Transaction Management</h2>
          <button class="filter-trigger" onclick="openFilterPanel()">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="4" y1="6" x2="16" y2="6"/>
              <line x1="8" y1="12" x2="20" y2="12"/>
              <line x1="4" y1="18" x2="12" y2="18"/>
            </svg>
            Filter
          </button>
        </div>
        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th>Date</th><th>Time</th><th>Teacher</th><th>Week</th><th>Session Date</th><th>Status</th>
                <th>Payment Type</th><th>Method</th><th>Purpose</th><th>Bill Amount</th><th>Paid Amount</th><th>Remaining Balance</th><th>Reference Number</th><th>Generate Receipt</th>
              </tr>
            </thead>
            <tbody id="transactionTableBody"></tbody>
          </table>
        </div>
      </div>
    </main>
  </div>

  <!-- PAYMENT MODAL -->
  <div class="payment-modal-overlay" id="paymentModal" onclick="closePaymentModal(event)">
    <div class="payment-modal" onclick="event.stopPropagation()">
      <div class="payment-modal-header">
        <h3 class="payment-modal-title">Payment for this session</h3>
        <p class="payment-modal-subtitle">Please select a payment type and the amount paid</p>
      </div>

      <div class="payment-modal-body">
        <div class="payment-modal-row">
          <div class="payment-modal-field">
            <label class="payment-modal-label">Week</label>
            <input type="text" class="payment-modal-input" id="modalWeek" readonly>
          </div>
          <div class="payment-modal-field">
            <label class="payment-modal-label">Session Date</label>
            <input type="text" class="payment-modal-input" id="modalSessionDate" readonly>
          </div>
        </div>

        <div class="payment-modal-row">
          <div class="payment-modal-field">
            <label class="payment-modal-label">Purpose</label>
            <input type="text" class="payment-modal-input" id="modalPurpose" value="Individual Session" readonly>
          </div>
          <div class="payment-modal-field">
            <label class="payment-modal-label">Teacher</label>
            <input type="text" class="payment-modal-input" id="modalTeacher" value="Ms. Sheila" readonly>
          </div>
        </div>

        <div class="payment-modal-row">
          <div class="payment-modal-field">
            <label class="payment-modal-label">Payment Type</label>
            <select class="payment-modal-select" id="modalPaymentType">
              <option value="DSWD">DSWD</option>
              <option value="Cash">Cash</option>
              <option value="Digital">Digital</option>
            </select>
          </div>
          <div class="payment-modal-field">
            <label class="payment-modal-label">Method</label>
            <select class="payment-modal-select" id="modalMethod">
              <option value="BDO">BDO</option>
              <option value="GCash">GCash</option>
              <option value="PayMaya">PayMaya</option>
              <option value="Cash">Cash</option>
            </select>
          </div>
        </div>

        <div class="payment-modal-field full-width">
          <label class="payment-modal-label">Amount</label>
          <div class="payment-amount-split">
            <input type="text" class="payment-modal-input" id="modalPaidAmount" placeholder="600" value="600">
            <span class="payment-amount-divider">/</span>
            <input type="text" class="payment-modal-input" id="modalTotalAmount" value="600" readonly>
          </div>
        </div>

        <div class="payment-modal-actions">
          <button class="payment-modal-btn cancel" onclick="closePaymentModal()">Cancel</button>
          <button class="payment-modal-btn save" onclick="savePayment()">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- FILTER POPUP -->
  <div class="filter-overlay" id="filterOverlay" onclick="closeFilterPanel()">
    <div class="filter-panel" onclick="event.stopPropagation()">
      <div class="filter-header">
        <h3 class="filter-title">Edit Filter</h3>
        <button class="filter-close" onclick="closeFilterPanel()">√ó</button>
      </div>

      <!-- Date range / single date for DSWD payments -->
      <div class="filter-group">
        <label class="filter-label">Date</label>
        <input type="date" class="filter-input" id="filterDate">
      </div>

      <!-- Week within grant period -->
      <div class="filter-group">
        <label class="filter-label">Week</label>
        <select class="filter-select" id="filterWeek">
          <option value="ALL">ALL</option>
          <option value="Week 1">Week 1</option>
          <option value="Week 2">Week 2</option>
          <option value="Week 3">Week 3</option>
          <option value="Week 4">Week 4</option>
          <option value="Week 5">Week 5</option>
        </select>
      </div>

      <!-- Purpose: individual, group, evaluation -->
      <div class="filter-group">
        <label class="filter-label">Purpose</label>
        <select class="filter-select" id="filterPurpose">
          <option value="ALL">ALL</option>
          <option value="Individual Session">Individual Session</option>
          <option value="Group Session">Group Session</option>
          <option value="Evaluation">Evaluation</option>
        </select>
      </div>

      <!-- Status: Paid / Partial / Unpaid -->
      <div class="filter-group">
        <label class="filter-label">Status</label>
        <select class="filter-select" id="filterStatus">
          <option value="ALL">ALL</option>
          <option value="Paid">Paid</option>
          <option value="Partial">Partial</option>
          <option value="Unpaid">Unpaid</option>
        </select>
      </div>

      <!-- DSWD-specific payment type filter (preselect DSWD for this page if you want) -->
      <div class="filter-group">
        <label class="filter-label">Payment Type</label>
        <select class="filter-select" id="filterPaymentType">
          <option value="ALL">ALL</option>
          <option value="DSWD" selected>DSWD</option>
          <option value="Cash">Cash</option>
          <option value="Digital">Digital</option>
        </select>
      </div>

      <!-- Bank / channel used -->
      <div class="filter-group">
        <label class="filter-label">Payment Method</label>
        <select class="filter-select" id="filterPaymentMethod">
          <option value="ALL">ALL</option>
          <option value="BDO">BDO</option>
          <option value="GCash">GCash</option>
          <option value="PayMaya">PayMaya</option>
          <option value="Cash">Cash</option>
        </select>
      </div>

      <!-- Optional: Utilization status within grant -->
      <div class="filter-group">
        <label class="filter-label">Grant Utilization</label>
        <select class="filter-select" id="filterUtilization">
          <option value="ALL">ALL</option>
          <option value="Within Grant">Within Grant</option>
          <option value="Excess (Parent Top-up)">Excess (Parent Top-up)</option>
        </select>
      </div>

      <div class="filter-actions">
        <button class="btn-filter secondary" onclick="resetFilters()">Reset</button>
        <button class="btn-filter primary" onclick="applyFilters()">Apply</button>
      </div>
    </div>
  </div>

  <script>
    /* ============================================
       SEED DATA
       ============================================ */
    const paymentData = {
      weeklyPayment: [
        {
          week: 1,
          sessions: [
            { date: '4/12/2025', paid: 600, total: 600, status: 'green' },
            { date: '4/14/2025', paid: 600, total: 600, status: 'green' },
            { date: '4/16/2025', paid: 600, total: 600, status: 'green' }
          ],
          weeklyBill: 1800, totalPaid: 1800, remainingBalance: 0
        },
        {
          week: 2,
          sessions: [
            { date: '4/19/2025', paid: 500, total: 600, status: 'yellow' },
            { date: '4/21/2025', paid: 0, total: 600, status: 'red' },
            { date: '4/23/2025', paid: 600, total: 600, status: 'green' }
          ],
          weeklyBill: 1800, totalPaid: 1100, remainingBalance: 700
        },
        {
          week: 3,
          sessions: [
            { date: '4/12/2025', paid: 600, total: 600, status: 'green' },
            { date: '4/14/2025', paid: 500, total: 600, status: 'yellow' },
            { date: '4/16/2025', paid: 0, total: 600, status: 'gray' }
          ],
          weeklyBill: 1200, totalPaid: 1100, remainingBalance: 100
        },
        {
          week: 4,
          sessions: [
            { date: '4/12/2025', paid: 0, total: 600, status: 'gray' },
            { date: '4/14/2025', paid: 0, total: 0, status: 'gray' },
            { date: '4/16/2025', paid: 0, total: 0, status: 'gray' }
          ],
          weeklyBill: 1800, totalPaid: 0, remainingBalance: 0
        },
        {
          week: 5,
          sessions: [
            { date: '4/12/2025', paid: 0, total: 0, status: 'gray' },
            { date: '4/14/2025', paid: 0, total: 0, status: 'gray' },
            { date: '4/16/2025', paid: 0, total: 0, status: 'gray' }
          ],
          weeklyBill: 1800, totalPaid: 0, remainingBalance: 0
        }
      ],
      evaluation: [
        { date: '03/20/2025', datePaid: '03/20/2025', amount: 500, paidAmount: 500, remainingBalance: 0, status: 'paid' },
        { date: '05/01/2025', datePaid: '5/18/2025', amount: 500, paidAmount: 0, remainingBalance: 500, status: 'unpaid' },
        { date: '07/20/2025', datePaid: '5/18/2025', amount: 500, paidAmount: 0, remainingBalance: 500, status: 'unpaid' }
      ],
      scheduledEvaluation: [
        { date: '03/20/2025', time: '8:30 - 10:00 AM', teacher: 'Ms. Denise', status: 'Attended' },
        { date: '05/20/2025', time: '8:30 - 10:00 AM', teacher: 'Ms. Denise', status: '-' },
        { date: '07/20/2025', time: '8:30 - 10:00 AM', teacher: 'Ms. Denise', status: '-' }
      ],
      groupSession: [
        { date: '5/28/2025', datePaid: '5/18/2025', amount: 700, paidAmount: 600, remainingBalance: 100, status: 'partial' },
        { date: '5/28/2025', datePaid: '5/18/2025', amount: 700, paidAmount: 700, remainingBalance: 0, status: 'paid' }
      ],
      scheduledGroup: [
        { date: '04/01/2025', time: '8:30 - 10:00 AM', teacher: 'Ms. Sheila', status: 'Attended' },
        { date: '04/01/2025', time: '8:30 - 10:00 AM', teacher: 'Ms. Audrey', status: 'Missed' }
      ],
      transactions: [
        { date:'4/12/2025', time:'10:23 AM', teacher:'Sheila', week:'Week 1', sessionDate:'4/12/2025', status:'Paid',    paymentType:'DSWD', method:'BDO', purpose:'Individual Session', billAmount:600, paidAmount:600, remainingBalance:0,   referenceNumber:'041225001' },
        { date:'4/12/2025', time:'10:23 AM', teacher:'Sheila', week:'Week 1', sessionDate:'4/12/2025', status:'Partial', paymentType:'DSWD', method:'BDO', purpose:'Group Session',      billAmount:700, paidAmount:600, remainingBalance:100, referenceNumber:'041225001' },
        { date:'4/12/2025', time:'10:23 AM', teacher:'Sheila', week:'Week 1', sessionDate:'4/12/2025', status:'Partial', paymentType:'DSWD', method:'BDO', purpose:'Evaluation',         billAmount:700, paidAmount:600, remainingBalance:100, referenceNumber:'041225001' }
      ]
    };

    /* ============================================
       RENDER FUNCTIONS
       ============================================ */
    function renderWeeklyPayment(){
      const container = document.getElementById('weeklyPaymentContainer');

      container.innerHTML = paymentData.weeklyPayment.map(week => `
        <div class="week-row">
          <div class="week-header">
            <div class="week-label">Week ${week.week}</div>

            <div class="session-dates">
              ${week.sessions.map(session => `
                <div class="session-date-item">
                  <div class="session-date-wrapper">
                    <div class="session-date">${session.date}</div>
                    <div class="session-status-row">
                      <div class="session-payment">
                        <span>P</span>
                        <span class="session-payment-underlined">${session.paid}</span>
                        <span>/</span>
                        <span>${session.total}</span>
                      </div>
                      <button
                        class="status-dot-btn"
                        title="Record / view payment"
                        onclick="openPaymentModal(${week.week}, '${session.date}', ${session.paid}, ${session.total})"
                      >
                        <span class="status-indicator ${session.status}"></span>
                      </button>
                    </div>
                  </div>
                </div>
              `).join('')}
            </div>

            <div class="week-summary">‚Ç± ${week.weeklyBill.toLocaleString()}</div>
            <div class="week-summary">‚Ç± ${week.totalPaid.toLocaleString()}</div>
            <div class="week-summary">‚Ç± ${week.remainingBalance.toLocaleString()}</div>
          </div>
        </div>
      `).join('');
    }

    /* ============================================
       PAYMENT MODAL
       ============================================ */
    function openPaymentModal(week, sessionDate, paidAmount, totalAmount){
      document.getElementById('modalWeek').value = `Week ${week}`;
      document.getElementById('modalSessionDate').value = sessionDate;
      document.getElementById('modalPaidAmount').value = paidAmount;
      document.getElementById('modalTotalAmount').value = totalAmount;
      document.getElementById('paymentModal').classList.add('active');
    }
    function closePaymentModal(event){
      document.getElementById('paymentModal').classList.remove('active');
    }
    function savePayment(){
      const payload = {
        week: document.getElementById('modalWeek').value,
        sessionDate: document.getElementById('modalSessionDate').value,
        paymentType: document.getElementById('modalPaymentType').value,
        method: document.getElementById('modalMethod').value,
        paidAmount: document.getElementById('modalPaidAmount').value,
        totalAmount: document.getElementById('modalTotalAmount').value
      };
      console.log('Saving payment:', payload);
      closePaymentModal();
      alert('Payment saved successfully!');
    }

    function renderEvaluation(){
      const tbody = document.getElementById('evaluationTableBody');
      tbody.innerHTML = paymentData.evaluation.map(item => `
        <tr>
          <td>${item.date}</td>
          <td>${item.datePaid}</td>
          <td>‚Ç± ${item.amount.toLocaleString()}</td>
          <td>‚Ç± ${item.paidAmount.toLocaleString()}</td>
          <td>‚Ç± ${item.remainingBalance.toLocaleString()}</td>
          <td>${item.status === 'paid' ? '<span class="status-indicator green"></span>' : '<button class="btn-pay">Pay Now</button>'}</td>
        </tr>
      `).join('');
    }
    function renderScheduledEvaluation(){
      const tbody = document.getElementById('scheduledEvalTableBody');
      tbody.innerHTML = paymentData.scheduledEvaluation.map(item => `
        <tr><td>${item.date}</td><td>${item.time}</td><td>${item.teacher}</td><td>${item.status}</td></tr>
      `).join('');
    }
    function renderGroupSession(){
      const tbody = document.getElementById('groupSessionTableBody');
      tbody.innerHTML = paymentData.groupSession.map(item => `
        <tr>
          <td>${item.date}</td>
          <td>${item.datePaid}</td>
          <td>‚Ç± ${item.amount.toLocaleString()}</td>
          <td>‚Ç± ${item.paidAmount.toLocaleString()}</td>
          <td>‚Ç± ${item.remainingBalance.toLocaleString()}</td>
          <td>${item.status === 'paid' ? '<span class="status-indicator green"></span>' : '<button class="btn-pay">Pay Now</button>'}</td>
        </tr>
      `).join('');
    }
    function renderScheduledGroup(){
      const tbody = document.getElementById('scheduledGroupTableBody');
      tbody.innerHTML = paymentData.scheduledGroup.map(item => `
        <tr><td>${item.date}</td><td>${item.time}</td><td>${item.teacher}</td><td>${item.status}</td></tr>
      `).join('');
    }
    function renderTransactions(){
      const tbody = document.getElementById('transactionTableBody');
      tbody.innerHTML = paymentData.transactions.map(item => `
        <tr>
          <td>${item.date}</td>
          <td>${item.time}</td>
          <td>${item.teacher}</td>
          <td>${item.week}</td>
          <td>${item.sessionDate}</td>
          <td><span class="status-badge ${item.status.toLowerCase()}">${item.status}</span></td>
          <td>${item.paymentType}</td>
          <td>${item.method}</td>
          <td>${item.purpose}</td>
          <td>‚Ç± ${item.billAmount.toLocaleString()}</td>
          <td>‚Ç± ${item.paidAmount.toLocaleString()}</td>
          <td>‚Ç± ${item.remainingBalance.toLocaleString()}</td>
          <td>${item.referenceNumber}</td>
          <td><button class="btn-pay">Download</button></td>
        </tr>
      `).join('');
    }

    /* ============================================
       CHART
       ============================================ */
    function initChart(){
      const ctx = document.getElementById('paymentChart').getContext('2d');
      new Chart(ctx,{
        type:'doughnut',
        data:{
          labels:['Paid | Attended Session','Unpaid | Attended','Remaining Session'],
          datasets:[{ data:[65,12.5,25], backgroundColor:['#4CAF50','#FF9D5C','#5DD5C0'], borderWidth:0 }]
        },
        options:{
          responsive:true, maintainAspectRatio:false,
          plugins:{ legend:{ position:'right', labels:{ usePointStyle:true, pointStyle:'circle', padding:20, font:{ size:11 } } } },
          cutout:'70%'
        }
      });
    }

    /* ============================================
       FILTER + SIDEBAR
       ============================================ */
    function openFilterPanel(){
      document.getElementById('filterOverlay').classList.add('active');
    }
    function closeFilterPanel(){
      document.getElementById('filterOverlay').classList.remove('active');
    }
    function resetFilters(){
      document.getElementById('filterDate').value='';
      document.getElementById('filterWeek').value='ALL';
      document.getElementById('filterPurpose').value='ALL';
      document.getElementById('filterStatus').value='ALL';
      document.getElementById('filterPaymentType').value='ALL';
      document.getElementById('filterPaymentMethod').value='ALL';
      const util = document.getElementById('filterUtilization');
      if(util) util.value='ALL';
    }
    function applyFilters(){
      const filters={
        date:document.getElementById('filterDate').value,
        week:document.getElementById('filterWeek').value,
        purpose:document.getElementById('filterPurpose').value,
        status:document.getElementById('filterStatus').value,
        paymentType:document.getElementById('filterPaymentType').value,
        paymentMethod:document.getElementById('filterPaymentMethod').value,
        utilization:document.getElementById('filterUtilization') ? document.getElementById('filterUtilization').value : 'ALL'
      };
      console.log('Applying filters (DSWD Payment):',filters);
      closeFilterPanel();
    }
    function toggleDropdown(el){ el.classList.toggle('open'); el.querySelector('.nav-dropdown').classList.toggle('open'); }
    function showNotifications(){ alert('Notifications feature coming soon!'); }

    /* ============================================
       INIT
       ============================================ */
    document.addEventListener('DOMContentLoaded',()=>{
      renderWeeklyPayment();
      renderEvaluation();
      renderScheduledEvaluation();
      renderGroupSession();
      renderScheduledGroup();
      renderTransactions();
      initChart();

      document.getElementById('searchInput').addEventListener('input',(e)=>{
        const t = e.target.value.toLowerCase();
        if(t.length>0){ console.log('Searching for:', t); }
      });
      document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ closeFilterPanel(); } });
    });
  </script>
</body>
</html>
